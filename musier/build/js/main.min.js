var loaded=!1,loading=!1,scrolling=!1,aniEnd="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",step1=!1,step2=!1,setp3=!1,step4=!1,timeOut=0,login=!1,answers={q1a:"",q1b:"",q2:"",q3:"",q4:""};function detectmob(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}var devices=detectmob();function GetIEVersion(){var t=window.navigator.userAgent,e=t.indexOf("MSIE");return e>0?parseInt(t.substring(e+5,t.indexOf(".",e))):navigator.userAgent.match(/Trident\/7\./)?11:0}var mise=GetIEVersion();function onMove(){var t=$(".ani-scroll, .label-scroll, .article-inner > *");$(t).each(function(){$(this).isInViewport()?$(this).addClass("ani"):$(this).removeClass("ani")})}function getUV(t,e){$(".uv-result .uv-number").html(t),$(".uv-result .result").html(e),$(".uv-result").animate({opacity:1},350,"linear",function(){$(".uv-result").css({"min-height":"auto"})}),loading=!1}function getDistrict(t){var e=city_district[t].districts,i='<li data-value="">Quận / Huyện</li>';$.each(e,function(t,e){i+='<li data-value="'+e+'">'+e+"</li>"}),$(".list-district").html(i),loading=!1}function getAgency(t,e,i){$.ajax({type:"POST",data:{district:t,city:e,type:i},url:"/distributions/filter"}).done(function(t){if(t.success){distributions=t.data;for(var e="",i=0;i<distributions.length;i++)e+='<div class="agency" agen-id="'+distributions[i].id+'"><h3>'+distributions[i].name+"</h3><p>"+distributions[i].address+", "+distributions[i].city+", "+distributions[i].district+'</p><span class="time">'+distributions[i].open_time+"</span></div>";$(".list-agency").html(e),initMap()}}),loading=!1}function getLocation(){navigator.geolocation?(loading=!0,navigator.geolocation.getCurrentPosition(showPosition)):alert("Geolocation is not supported by this browser.")}function showPosition(t){console.log("show"),$.ajax({type:"POST",data:{lat:t.coords.latitude,lng:t.coords.longitude},url:"/distributions/search-near-by"}).done(function(t){if(t.success){distributions=t.data;for(var e="",i=0;i<distributions.length;i++)e+='<div class="agency" agen-id="'+distributions[i].id+'"><h3>'+distributions[i].name+"</h3><p>"+distributions[i].address+", "+distributions[i].city+", "+distributions[i].district+'</p><span class="time">'+distributions[i].open_time+"</span></div>";$(".list-agency").html(e),initMap()}}),loading=!1}function Slider(){$(".article-slider").length&&$(".article-slider").olwSlider({itemsCustom:[[0,1],[840,2]],slideSpeed:1e3,paginationSpeed:1e3,navigation:!0,rewindNav:!0}),$(".pics-slider").length&&$(".pics-slider").olwSlider({singleItem:!0,slideSpeed:1e3,navigation:!0}),$(".anessa-slider").length&&$(".anessa-slider").olwSlider({itemsCustom:[[0,1],[600,2],[840,3],[1045,4]],slideSpeed:1e3,paginationSpeed:1e3,navigation:!0,rewindNav:!0})}function stepValidate(t){var e=$(".content-box.active .step-check").find("li.active").length,i=$(".content-box.active .step-radio").find("li.active").length;e||i?($('.step-number li[data-target= "'+t+'"]').next().removeClass("disabled"),$(".content-box.active .btn-help-me").removeClass("disabled")):(e||e)&&($('.step-number li[data-target= "'+t+'"]').next().addClass("disabled"),$(".content-box.active .btn-help-me").addClass("disabled"))}function stopTimeOut(){timeOut=setTimeout(";");for(var t=0;t<timeOut;t++)clearTimeout(t)}function Events(){$(".nav-but").on("click",function(){stopTimeOut(),$(this).hasClass("active")?($("html,body").removeClass("no-scroll"),$(".nav-overlay, .nav-but, .navigation, .logo, .footer, .to-top").removeClass("active")):($("html,body").addClass("no-scroll"),$(".nav-overlay, .nav-but, .navigation, .logo, .to-top").addClass("active"),timeOut=setTimeout(function(){$(".footer").addClass("active")},610))}),$(".to-top").on("click",function(){$("html, body").stop().animate({scrollTop:0},"slow")}),$(".uv-box .select-title").on("click",function(){$(".uv-box .select-title").hasClass("active")?($(".uv-box .select-title").removeClass("active"),$(".uv-box .select-data").fadeOut(100,"linear")):($(this).addClass("active"),$(".uv-box .select-data").fadeIn(100))}),$(".uv-box .select-data li").on("click",function(t){t.preventDefault(),$(".uv-box .select-data li").removeClass("current"),$(".uv-box .select-title").html($(this).html()),$(this).addClass("current"),$(".uv-box .select-data").fadeOut(100),$(".uv-box .select-title").removeClass("active");var e=$(this).attr("data-value"),i=$(this).attr("data-result");if(!loading){loading=!0;$(".uv-box .uv-result").css({"min-height":$(".uv-box .uv-result").innerHeight()}),$(".uv-box .uv-result").animate({opacity:0},350,"linear",function(){getUV(e,i)})}return!1}),$(".btn-decor").on("click",function(){var t=$(".decor").offset().top-60;$("html, body").stop().animate({scrollTop:t},"slow")}),$(".sub-menu li a").on("click",function(t){t.preventDefault();var e=$(this).attr("data-target");return e&&"all"==e?($(".sub-menu li").removeClass("active"),$(this).parent().addClass("active"),$(".product-list").animate({opacity:0},100,"linear",function(){$(".content-box").removeClass("hide"),$(".col-left,.col-right").removeClass("ani")}),setTimeout(function(){$(".product-list").animate({opacity:1},100,"linear",function(){onMove()})},120)):e?($(".sub-menu li").removeClass("active"),$(this).parent().addClass("active"),$(".product-list").animate({opacity:0},100,"linear",function(){$(".content-box").addClass("hide"),$(".col-left,.col-right").removeClass("ani"),$(".content-box[data-show='"+e+"']").removeClass("hide")}),setTimeout(function(){$(".product-list").animate({opacity:1},100,"linear",function(){onMove()})},120)):window.location=$(this).attr("href"),!1}),$(".unit li").on("click",function(){$(".unit li").removeClass("active"),$(this).addClass("active");var t=$(this).attr("data-gcode");$(".price").html($(this).attr("data-price")+"<sup>đ</sup>"),$(".dis-list ul li").hide(),$(".dis-list ul li."+t).show();var e=$("#base-url").val()+"/"+t;window.history.pushState&&window.history.pushState({},"Products - Anessa",e),$(".pics-slider").find(".slide-wrapper").css("transform","translate3d(0px, 0px, 0px)"),$(".pics-slider").find("img").first().attr("src",$(this).attr("data-image")).hide(),$(".pics-slider").find("img").first().fadeIn("slow")}),$(".btn-order").on("click",function(){$(this).hasClass("show")?($(this).removeClass("show"),$(".dis-list").fadeOut(300,"linear",function(){$(".find-more").show()})):($(this).addClass("show"),$(".find-more").hide(),$(".dis-list").fadeIn(300,"linear",function(){}))}),$(".explan-title").on("click",function(){var t=$(this).parent();if(t.hasClass("show"))t.removeClass("show"),t.find(".explan-detail").fadeOut("fast");else{var e=$(".explan-item.show .explan-detail");$(".explan-item.show").removeClass("show"),t.addClass("show"),e.length?e.fadeOut("fast",function(){t.find(".explan-detail").fadeIn("fast",function(){})}):t.find(".explan-detail").fadeIn("fast",function(){})}}),$(".btn-help-me").on("click",function(t){if(t.preventDefault(),$(this).hasClass("disabled"))return!1;var e=$(".content-box").length;$(".content-box").css({width:$(window).width()}),$(".helpme-scroll").css({width:$(window).width()*e}),$(".step-number li").removeClass("active");var i=$(this).attr("data-target");if("step-05"==i&&isLoginRequired)return $(".popup").addClass("active"),!1;"step-05"!=i||isLoginRequired||($(".popup").removeClass("active"),$.ajax({type:"POST",data:{answers:answers},url:"/helps/get-result"}).done(function(t){if(t.success){var e=t.data;$("#help-title").html(e.title),$("#help-description").html(e.description),$("#help-link").attr("href",e.link),$("#help-image").attr("src",e.image)}else isLoginRequired=!0})),"go"==i&&(window.location.href=$(this).attr("href")),$(".content-box").removeClass("active"),$('.content-box[data-type= "'+i+'"]').addClass("active"),$('.step-number li[data-target= "'+i+'"]').addClass("active");var s=$(".helpme-scroll").offset().left,a=$(".content-box.active").offset().left;return $(".helpme-scroll").css({height:$(".content-box.active").innerHeight()}),stepValidate(i),$("html, body").scrollTop(0),$(".helpme-scroll").animate({left:s-a},800,"easeInOutExpo",function(){}),!1}),$(".helpme-scroll").on("click",".step-number li",function(t){if(t.preventDefault(),$(this).hasClass("disabled"))return!1;var e=$(".content-box").length;$(".content-box").css({width:$(window).width()}),$(".helpme-scroll").css({width:$(window).width()*e}),$(".step-number li").removeClass("active");var i=$(this).attr("data-target");if("step-05"==i&&isLoginRequired)return $(".popup").addClass("active"),!1;$('.step-number li[data-target= "'+i+'"]').addClass("active"),$(".content-box").removeClass("active"),$('.content-box[data-type= "'+i+'"]').addClass("active"),stepValidate(i);var s=$(".helpme-scroll").offset().left,a=$(".content-box.active").offset().left;return $(".helpme-scroll").css({height:$(".content-box.active").innerHeight()}),$("html, body").scrollTop(0),$(".helpme-scroll").animate({left:s-a},800,"easeInOutExpo",function(){}),!1}),$(".step-check li").on("click",function(){$(".step-check li").removeClass("active"),$(this).hasClass("active")||($(this).addClass("active"),answers[$(this).parent().attr("data-value")]=$(this).attr("data-value")),stepValidate($(".content-box.active").attr("data-type"))}),$(".step-radio li").on("click",function(){$(this).hasClass("active")||($(this).parent().find("li").removeClass("active"),$(this).addClass("active"),answers[$(this).parent().attr("data-value")]=$(this).attr("data-value")),stepValidate($(".content-box.active").attr("data-type"))}),$(".popup-box").on("click",function(t){t.stopPropagation()}),$(".register-but").on("click",function(){return FB.login(function(t){t.authResponse?$.ajax({type:"POST",url:"/helps/login-with-facebook"}).done(function(t){t.success?(isLoginRequired=!1,$(".popup").removeClass("active")):isLoginRequired=!0}):console.log("User cancelled login or did not fully authorize.")}),!1}),$(".close-but, .popup").on("click",function(){$(".popup").removeClass("active")});var t="";$.each(city_district,function(e,i){t+="<li "+(5==e?'class="current"':"")+' data-value="'+i.name+'" data-id="'+e+'">'+i.name+"</li>"}),$(".box-location .list-city").html(t);var e=city_district[5].districts,i="";$.each(e,function(t,e){i+='<li data-value="'+e+'">'+e+"</li>"}),$(".list-district").html(i),$(".box-location .select-title").on("click",function(t){t.stopPropagation(),$(this).hasClass("active")?($(this).removeClass("active"),$(this).next().fadeOut(100)):($(".select-title.active").next().fadeOut(0,function(){$(".select-title.active").removeClass("active")}),$(this).addClass("active"),$(this).next().fadeIn(100))}),$(".box-location").on("click",".select-data li",function(t){t.preventDefault();var e=$(this).parent(),i=$(this).attr("data-id"),s=$(".shop li.current").attr("data-id");if(e.find("li").removeClass("current"),$(this).parent().parent().parent().find(".select-title h3").text($(this).text()),$(this).addClass("current"),$(this).parent().parent().fadeOut(100),$(".select-title").removeClass("active"),i&&e.hasClass("list-city")){var a=$(this).attr("data-value");loading||(loading=!0,getDistrict(i),getAgency("",a,s))}else if(e.hasClass("list-district")){a=$(".city li.current").attr("data-value");getAgency($(this).attr("data-value"),a,s)}else if(i&&e.hasClass("list-shop")){a=$(".city li.current").attr("data-value");getAgency($(".district li.current").attr("data-value"),a,i)}return!1}),$(".agency-system").on("click",".agency",function(t){t.preventDefault(),t.stopPropagation();for(var e=$(this).attr("agen-id"),i=null,s=0;s<markers.length;s++)if(markers[s].id==e){i=markers[s],byClick=!0;break}return google.maps.event.trigger(i,"click"),!1}),$(".agency-system").on("click",".shop-near",function(t){t.preventDefault(),t.stopPropagation(),getLocation()}),$(".side-item").on("click",function(){clearTimeout();var t=$(this).attr("data-index"),e=$(".on-scroll[data-target='"+t+"']").offset().top-70;$(window).width();$(".uv-side").removeClass("active"),timeOut=setTimeout(function(){$("html, body").stop().animate({scrollTop:e},1e3)},350)}),$(".uv-sub").on("click",function(){$(this).hasClass("active")?$(".uv-sub, .uv-side").removeClass("active"):$(".uv-sub, .uv-side").addClass("active")}),$(document).on("click",function(t){$(t.target).hasClass("select-title")||$(t.target).parent().hasClass("select-title")||$(t.target).parent().hasClass("select-input")||$(".select-title.active").next().fadeOut(0,function(){$(".select-title.active").removeClass("active")})}),$(".city input").on("keyup",function(t){if(t.stopPropagation(),13==t.keyCode){if($(".city li.current").length){var e=$(".city li.current").attr("data-id"),i=$(".city li.current").attr("data-value"),s=$(".shop li.current").attr("data-id");$(".city .select-title h3").text($(".city li.current").text()),$(".city .select-data").fadeOut(),$(".city .select-title").removeClass("active"),e&&(loading||(loading=!0,getDistrict(e),getAgency("",i,s)))}}else{if(38==t.keyCode){t.preventDefault(),$(".city input").focusTextToEnd();var a=$(".city li.current").prevAll(".city li").not(".hide").first();if(a.length){$(".city li").removeClass("current"),a.addClass("current");var n=$(".list-city").scrollTop();$(".list-city").scrollTop(n-37)}return!1}if(40==t.keyCode){t.preventDefault();var o=$(".city li.current").nextAll(".city li").not(".hide").first();if(o.length){$(".city li").removeClass("current"),o.addClass("current");n=$(".list-city").scrollTop();$(".list-city").scrollTop(n+37)}return!1}$(".city li").removeClass("current");var l=$(this).val().toLowerCase();""!=(l=remove_unicode(l))?$(".city li").each(function(t,e){var i=$(e).text().toLowerCase();(i=remove_unicode(i)).indexOf(l)>-1?($(e).removeClass("hide"),$(".city li:not(.hide)").first().addClass("current")):$(e).addClass("hide")}):($(".city li").removeClass("hide"),$(".city li").removeClass("current"),$(".city li:first").addClass("current"),$(".city-list").scrollTop(0))}}),$(".district input").on("keyup",function(t){if(13==t.keyCode){var e=$(".district li.current").attr("data-value"),i=$(".city li.current").attr("data-value"),s=$(".shop li.current").attr("data-id");$(".district li.current").length&&($(".district .select-title h3").text($(".district li.current").text()),$(".district .select-data").fadeOut(100,"linear"),$(".district .select-title").removeClass("active")),e&&(loading||(loading=!0,getAgency(e,i,s)))}else{if(38==t.keyCode){t.preventDefault(),$(".district input").focusTextToEnd();var a=$(".district li.current").prevAll(".district li").not(".hide").first();if(a.length){$(".district li").removeClass("current"),a.addClass("current");var n=$(".list-district").scrollTop();$(".list-district").scrollTop(n-37)}return!1}if(40==t.keyCode){t.preventDefault();var o=$(".district li.current").nextAll(".district li").not(".hide").first();if(o.length){$(".district li").removeClass("current"),o.addClass("current");n=$(".list-district").scrollTop();$(".list-district").scrollTop(n+37)}return!1}$(".district li").removeClass("current");var l=$(this).val().toLowerCase();""!=(l=remove_unicode(l))?$(".district li").each(function(t,e){var i=$(e).text().toLowerCase();(i=remove_unicode(i)).indexOf(l)>-1?($(e).removeClass("hide"),$(".district li:not(.hide)").first().addClass("current")):$(e).addClass("hide")}):($(".district li").removeClass("hide"),$(".district li").removeClass("current"),$(".district li:first").addClass("current"),$(".list-district").scrollTop(0))}}),$(".shop input").on("keyup",function(t){if(13==t.keyCode){var e=$(".shop li.current").attr("data-id");if($(".shop li.current").length&&($(".shop .select-title h3").text($(".shop li.current").text()),$(".shop .select-data").fadeOut(100,"linear"),$(".shop .select-title").removeClass("active")),e&&!loading){loading=!0;var i=$(".city li.current").attr("data-value");getAgency($(".district li.current").attr("data-value"),i,e)}}else{if(38==t.keyCode){t.preventDefault(),$(".shop input").focusTextToEnd();var s=$(".shop li.current").prevAll(".shop li").not(".hide").first();if(s.length){$(".shop li").removeClass("current"),s.addClass("current");var a=$(".list-shop").scrollTop();$(".list-shop").scrollTop(a-37)}return!1}if(40==t.keyCode){t.preventDefault();var n=$(".shop li.current").nextAll(".shop li").not(".hide").first();if(n.length){$(".shop li").removeClass("current"),n.addClass("current");a=$(".list-shop").scrollTop();$(".list-shop").scrollTop(a+37)}return!1}$(".shop li").removeClass("current");var o=$(this).val().toLowerCase();""!=(o=remove_unicode(o))?$(".shop li").each(function(t,e){var i=$(e).text().toLowerCase();(i=remove_unicode(i)).indexOf(o)>-1?($(e).removeClass("hide"),$(".shop li:not(.hide)").first().addClass("current")):$(e).addClass("hide")}):($(".shop li").removeClass("hide"),$(".shop li").removeClass("current"),$(".shop li:first").addClass("current"),$(".list-shop").scrollTop(0))}}),$(".zoom-map").on("click",function(t){$(".container").hasClass("full-size")?$(".container, .header, .footer").removeClass("full-size"):$(".container, .header, .footer").addClass("full-size")})}function Resize(){if($(".helpme-scroll").length){var t=$(".content-box").length;$(".content-box").css({width:$(window).width()}),$(".helpme-scroll").css({width:$(window).width()*t});var e=$(".helpme-scroll").offset().left,i=$(".content-box.active").offset().left;$(".helpme-scroll").css({height:$(".content-box.active").innerHeight()}),$(".helpme-scroll").animate({left:e-i},800,"easeInOutExpo",function(){}),onMove()}}$(document).ready(function(){if(Slider(),mise>0&&($("body").impulse({effect:"easeOutQuad"}),$("body").addClass("isIE")),$(".helpme-scroll").length){var t=$(".content-box").length;$(".content-box").css({width:$(window).width()}),$(".helpme-scroll").css({width:$(window).width()*t,height:$(".content-box.active").innerHeight()})}function e(){if($(".header, .container, .footer").css({opacity:1}),$(".bg-full").addClass("ani"),$(".helpme-scroll").length){var t=$(".content-box").length;$(".content-box").css({width:$(window).width()}),$(".helpme-scroll").css({width:$(window).width()*t,height:$(".content-box.active").innerHeight()})}setTimeout(function(){onMove()},0)}$("body").imagesLoaded().done(function(t){$(".overlay").fadeOut(500,function(){$("html,body").scrollTop(0),loaded=!0,scrolling=!0,e()})}),setTimeout(function(){loaded||(loaded=!0,$(".overlay").fadeOut(500,function(){$("html,body").scrollTop(0),scrolling=!0,e()}))},3e3),Events(),$(document).bind("scroll",function(){var t=$(document).scrollTop();$(window).width();window.requestAnimationFrame(function(){scrolling&&(t>=110?$(".header, .sub-menu, .bg, .btn-decor, .uv-side").addClass("hide"):$(".header, .sub-menu, .bg, .btn-decor, .uv-side").removeClass("hide"),t>=$(window).height()/2?$(".to-top").addClass("show"):$(".to-top").removeClass("show"),$(".uv-sub").length&&$(".on-scroll").each(function(e,i){var s=$(this).offset().top-110,a=s+$(this).outerHeight();if(t>=s&&t<=a){$(".uv-sub li").removeClass("active"),$(".on-scroll").removeClass("active"),$(this).addClass("active");var n=$(".on-scroll.active").last().attr("data-target");n&&($(".uv-sub li").removeClass("current"),$('.uv-sub li[data-index="'+n+'"]').addClass("active"))}}),onMove())})})}),$(window).resize(function(){}),$(window).on("resize",function(){devices||Resize()},150),$(window).on("orientationchange",function(){setTimeout(function(){Resize()},150)}),window.onorientationchange=Resize,window.fbAsyncInit=function(){FB.init({appId:"213780229094280",cookie:!0,version:"v2.8"})},function(t,e,i){var s,a=t.getElementsByTagName(e)[0];t.getElementById(i)||((s=t.createElement(e)).id=i,s.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(s,a))}(document,"script","facebook-jssdk");